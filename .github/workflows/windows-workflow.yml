
name: "windows kind CI workflow"

on:
  push:
    branches: [ main ]
  schedule:
      # https://crontab.guru/
      # https://docs.github.com/en/actions/reference/events-that-trigger-workflows
      - cron:  '0 0 * * FRI' ##execution of a task in the first minute of the month  




jobs:

  choco-windows-latest:
    name: "kind choco windows-latest Microsoft Windows Server 2019 Datacenter pwsh"  
    runs-on: windows-latest
    steps:
    - name: Checkout
      uses: actions/checkout@v1     
    - name: "osfingerprinting"
      run: systeminfo | more  
    - name: "check curl version"
      run: curl --version      
    - name: "install curl"
      run: choco install curl      
    # https://kind.sigs.k8s.io/docs/user/quick-start/
    - name: "Installing With A Package Manager - Choco"
      run: choco install kind
    - name: "see the list of kind clusters"
      run: kind get clusters #see the list of kind clusters



  pwsh-kind-windows-latest:
    name: "kind windows-latest Microsoft Windows Server 2019 Datacenter pwsh"  
    runs-on: windows-latest
    steps:
    - name: Checkout
      uses: actions/checkout@v1     
    - name: "osfingerprinting"
      run: systeminfo | more  
    - name: "check curl version"
      run: curl --version      
    - name: "install curl"
      run: choco install curl      
    # https://kind.sigs.k8s.io/docs/user/quick-start/
    - name: "Installing From Release Binaries"
      run: |
        curl.exe -Lo kind-windows-amd64.exe https://kind.sigs.k8s.io/dl/v0.11.1/kind-windows-amd64
        New-Item -Path "c:\" -Name "kind" -ItemType "directory" -Force
        Move-Item .\kind-windows-amd64.exe c:\kind\kind.exe
    - name: "see the list of kind clusters"
      run: kind get clusters #see the list of kind clusters